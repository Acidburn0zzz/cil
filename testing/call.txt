(type qaz)
(class file (read))
(macro mm ((type a))
	(type b)
	(call m (a b)))

(macro m ((type foo)(type bar))
	(type baz)
	(block c
		(type hi))
	(allow foo c.hi file (read))
	(allow foo .bar file (read))
	(allow baz .b.boz file (read))
	(block d
		(type hd))
	(allow baz d.hd file (read))
	(allow foo qaz file (read)))
(block b
	(type boz)
	(call m (boz .c.moo)))
(block c
	(type moo)
	(call mm (moo)))

(type foo)
(type bar)
(call m1 (foo))
(macro m1 ((type a))
	(type blah)
	(call m2 (a blah)))
(macro m2 ((type a) (type b))
	(allow a b file (read)))
